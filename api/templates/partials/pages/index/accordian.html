{% load static i18n %}

<div class="float-right w-[100%] max-[600px]:w-[100%] min-[882px]:w-[30%]">
  <div class="mb-[18px] rounded-[3px] bg-[#222] min-[855px]:mr-3 lg:ml-[15px] lg:mr-0">
    <div class="font-500 relative flex justify-between border-b-[1px] border-[#312f40] bg-[#222222] px-[15px] py-[8px] align-baseline">
      <h3 class="m-0 text-[15px] font-semibold leading-5 text-white">Popular</h3>
    </div>
    <div class="bg-[#222222]"
         x-data='{openedIndexs:["Weekly"], data:["Weekly","Monthly","All"]}'>
      <div>
        <div class="px-2.5 pt-[11px]">
          <div class="text-muted-foreground grid h-8 w-[100%] grid-cols-3 items-center justify-center rounded-[2px] bg-[#333] p-1 px-1.5"
               style="outline: none">
            <template x-for='da in data'>
              <button type="button"
                      :class='openedIndexs.includes(da) && "bg-themecolor"'
                      @click="openedIndexs = toggleIndexes(openedIndexs, da)"
                      x-text='da'
                      class="ring-offset-background focus-visible:ring-ring inline-flex h-[22px] items-center justify-center whitespace-nowrap rounded-sm px-8 py-1.5 text-[12px] font-normal text-white transition-all hover:text-themecolor focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50  shadow-sm">
              </button>
            </template>
          </div>
        </div>
        <div>
          <div x-show="openedIndexs.includes('Weekly')"
               class="ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"
               style="animation-duration: 0s">{% include "partials/pages/index/accordian_item-weekly.html" %}</div>
        </div>
        <div>
          <div x-show="openedIndexs.includes('Monthly')"
               class="ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"
               style="animation-duration: 0s">{% include "partials/pages/index/accordian_item-monthly.html" %}</div>
        </div>
        <div>
          <div x-show="openedIndexs.includes('All')"
               class="ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"
               style="animation-duration: 0s">{% include "partials/pages/index/accordian_item-all.html" %}</div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  function toggleIndexes(openedIndexs, da) {
    if (openedIndexs.includes(da)) {

      return openedIndexs.filter(i => i != da)
    }
    if (!openedIndexs.includes(da)) {

      return [da]
    }

  }
</script>
